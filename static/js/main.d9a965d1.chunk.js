(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(44)},23:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var o=a(0),r=a.n(o),n=a(10),c=a.n(n),i=(a(23),a(11)),d=a(12),s=a(15),m=a(13),l=a(16),p=a(14),h=a.n(p),v=a(3),u=a.n(v),f=(a(43),function(e){var t=e.onTakePhoto,a=e.onCameraStart;return r.a.createElement("div",null,r.a.createElement("canvas",{className:"canvas-partial-frame-overlay",id:"canvas-photo-frame-overlay"}),r.a.createElement("canvas",{className:"canvas-partial-frame-overlay",id:"canvas-bar-code-frame-overlay"}),r.a.createElement(u.a,{onTakePhoto:t,onCameraStart:a,idealFacingMode:v.FACING_MODES.ENVIRONMENT,isImageMirror:!1}))}),R=function(e){var t=e.title,a=e.onClick;return r.a.createElement("button",{onClick:a},t)},C=function(e){var t=e.src;return r.a.createElement("img",{src:t,width:"250px",alt:""})},g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={croppedPhoto:"",croppedBarCode:"",timestamp:"",videoRef:null,photoRectW:0,photoRectH:0,photoRectX:0,photoRectY:0,barCodeRectW:0,barCodeRectH:0,barCodeRectX:0,barCodeRectY:0},a.sendToS3=function(e,t){h.a.post("https://s3-bucket-proxy.mobidevdemo.com/upload",{photo:e,name:t}).then(function(e){return e}).catch(function(e){return console.error("UPLOAD ERROR => ",e)})},a.createPartialFrameOverlay=function(e){var t=e.selector,a=e.videoW,o=e.videoH,r=e.rectW,n=e.rectH,c=e.x,i=e.y,d=document.getElementById(t);d.width=a,d.height=o;var s=d.getContext("2d");s.lineWidth=1,s.strokeStyle="#fff",s.strokeRect(c,i,r,n)},a.initCamera=function(){var e=document.querySelector("video");if(e){var t=e.offsetWidth,o=e.offsetHeight,r=e.offsetWidth>e.offsetHeight,n=r?.34*o:.2*o,c=r?.2*t:.34*t,i=r?.07*t:.35*t,d=r?.3*o:.065*o,s=r?.16*o:.94*o,m=r?.94*t:.16*t,l=r?(t-m)/2:.055*t,p=r?.78*o:(o-s)/2;a.createPartialFrameOverlay({selector:"canvas-photo-frame-overlay",videoW:t,videoH:o,rectW:c,rectH:n,x:i,y:d}),a.createPartialFrameOverlay({selector:"canvas-bar-code-frame-overlay",videoW:t,videoH:o,rectW:m,rectH:s,x:l,y:p}),a.setState({videoRef:e,photoRectW:c,photoRectH:n,photoRectX:i,photoRectY:d,barCodeRectW:m,barCodeRectH:s,barCodeRectX:l,barCodeRectY:p})}},a.cropImage=function(e,t,a,o,r){var n=document.createElement("canvas"),c=n.getContext("2d");n.width=t,n.height=a;var i=document.createElement("canvas"),d=i.getContext("2d");return i.width=e.width,i.height=e.height,d.drawImage(e,0,0,e.width,e.height),c.drawImage(i,o,r,t,a,0,0,t,a),n.toDataURL()},a.onCameraStart=setTimeout(a.initCamera,2e3),a.onTakePhoto=function(e){var t=a.state,o=t.videoRef,r=t.photoRectW,n=t.photoRectH,c=t.photoRectX,i=t.photoRectY,d=t.barCodeRectW,s=t.barCodeRectH,m=t.barCodeRectX,l=t.barCodeRectY,p=new Image;p.src=e,p.width=o.offsetWidth,p.height=o.offsetHeight,p.onload=function(){var t=a.cropImage(p,r,n,c,i),o=a.cropImage(p,d,s,m,l),h=Date.now();a.setState({croppedPhoto:t,croppedBarCode:o,timestamp:h}),a.sendToS3(e,"passport_photo_".concat(h)),a.sendToS3(e,"passport_bar_code_".concat(h))}},a.openInNewTab=function(e){return function(){window.open().document.write('<img src="'.concat(e,'">'))}},a}return Object(l.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.initCamera)}},{key:"render",value:function(){var e=this.state,t=e.croppedPhoto,a=e.croppedBarCode,o=e.timestamp,n=!t&&!a;return r.a.createElement("div",{className:"app"},n&&r.a.createElement(f,{onTakePhoto:this.onTakePhoto,onCameraStart:this.onCameraStart}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"images-wrapper"},r.a.createElement("div",{className:"images-wrapper__item",style:{marginRight:"15px"}},r.a.createElement(C,{src:t}),r.a.createElement(R,{title:"passport_photo_".concat(o),onClick:this.openInNewTab(t)}),r.a.createElement(C,{src:a}),r.a.createElement(R,{title:"passport_bar_code_".concat(o),onClick:this.openInNewTab(a)})))))}}]),t}(o.Component);c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d9a965d1.chunk.js.map